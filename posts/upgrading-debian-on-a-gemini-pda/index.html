<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Upgrading Debian on a Gemini PDA | Boffins Blog</title>
<meta name="keywords" content="Bash, Cupboard Of Forgotten Tech, Debian, Gemini PDA, Linux, Software">
<meta name="description" content="There is an upgrade path to Debian 10 but an &lsquo;apt-get upgrade&rsquo; will fail. This bash script will help.">
<meta name="author" content="Boffin">
<link rel="canonical" href="https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e13be8719bbabf4005d0d2b0f19dba897f7d41b2e807b64c47ee1436d126ab01.css" integrity="sha256-4TvocZu6v0AF0NKw8Z26iX99QbLoB7ZMR&#43;4UNtEmqwE=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://boffinsblog.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://boffinsblog.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://boffinsblog.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://boffinsblog.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://boffinsblog.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:url" content="https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/">
  <meta property="og:site_name" content="Boffins Blog">
  <meta property="og:title" content="Upgrading Debian on a Gemini PDA">
  <meta property="og:description" content="There is an upgrade path to Debian 10 but an ‘apt-get upgrade’ will fail. This bash script will help.">
  <meta property="og:locale" content="en-gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-01-23T13:25:26+00:00">
    <meta property="article:modified_time" content="2023-01-23T13:25:26+00:00">
    <meta property="article:tag" content="Bash">
    <meta property="article:tag" content="Cupboard of Forgotten Tech">
    <meta property="article:tag" content="Debian">
    <meta property="article:tag" content="Gemini PDA">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Software">
    <meta property="og:image" content="https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/01_Upgrading_Debian_GeminiPDA.webp">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/01_Upgrading_Debian_GeminiPDA.webp">
<meta name="twitter:title" content="Upgrading Debian on a Gemini PDA">
<meta name="twitter:description" content="There is an upgrade path to Debian 10 but an &lsquo;apt-get upgrade&rsquo; will fail. This bash script will help.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://boffinsblog.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Upgrading Debian on a Gemini PDA",
      "item": "https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Upgrading Debian on a Gemini PDA",
  "name": "Upgrading Debian on a Gemini PDA",
  "description": "There is an upgrade path to Debian 10 but an \u0026lsquo;apt-get upgrade\u0026rsquo; will fail. This bash script will help.",
  "keywords": [
    "Bash", "Cupboard Of Forgotten Tech", "Debian", "Gemini PDA", "Linux", "Software"
  ],
  "articleBody": "Still wondering why I bought this. I’m always trying out different ways of upgrading Debian (or installing a different OS) on my Gemini PDA; anything more recent that the ancient shipped version would be nice.\nI’ve had one of these devices from Planet Computers since their Indiegogo campaign, but upgrading any OS onto it is not straightforward at all.\nI love the idea of it but for me, it’s a device looking for a purpose.\nHowever every so often I forget about the hours I’ve sunk into finding a use for it, dig it out of the cupboard of forgotten tech and boot it up.\nCurrent Debian state on the Gemini PDA Stuck on Debian 9 (stretch)\nThere is a path to upgrading to Debian 10 (buster) but a simple apt-get upgrade will fail\nNo further updates including security updates\nCannot set a static IP so no easy way to use SSH\nCannot set a wpa_supplicant so no WiFi auto-connect\nTo cut down on some of the time I spend tinkering with this thing, I put together a couple of scripts that:\nUpdate the base system, install some tools and apps and create a new user\nAdd scripts, configure existing apps and add some new ones\nRun these using bash to get the nice colourful output in the Terminal:\nbash 01.Install.sh\nbash 02.Configure.sh\n01.Install.sh This will:\nDisable ancient repos\nUpdate APT repos and install apt-transport-https\nPurge VLC before installing again later (causes upgrading error)\nUpgrade the system, this one will fail because of the LibreOffice nonsense (causes upgrading error)\nRepair LibreOffice\nUpdate APT repos and install some tools\nUpdate APT repos and install some apps\nUpgrade the system – system wide upgrade\nSet Timezone\nSet Locale as en_GB.UTF-8\nCreate a new user\nChange the hostname\nEnable avahi\nConfigure wpa_supplicant for automatic login\nSymlink the config into -wlan0.conf\nConfigure wlan0 interface\nFinally, tidy everything up\n02.Configure.sh This will:\nConfigure Wireshark\nMake the Terminal colourful\nDelete the gemini user\nRemove some directories\nAdd some directories\nAdd and configure the .ssh directory\nPopulate the .ssh directory\nAdd some scripts\nInstall Arduino from backup and configure\nInstall VNC from backup\nConfigure Conky \u0026 Compton\nAuto-hide the bottom panel\nAdd the ‘mount’ scripts to the menu\nHowever, Debian is not the only choice.\nThe Gemini PDA has a variety of operating systems available to use.\n(And I’ve been through most of them over the years.)\nI’m not going to cover how to re-flash a device (there are numerous articles about that on the interwebs) nor am I going to bemoan why there is no active development on any of these.\nAlternatives to Debian when upgrading the Gemini PDA If you are upgrading Debian on a Gemini PDA this is an overview of the current OS situation.\nOther OSs are available I wish that these were all straightforward to install, but they are not.\nAndroid is easily the easiest with a re-flash back to stock.\nHowever, Sailfish comes in a close second with PostmarketOS being the most complex to get up and running.\nAll have their idiosyncrasies though.\nAndroid Stuck on Android 8\nNo further updates including security updates\nSome current Apps no longer function under an OS from 2017\nThere seems to be no rooted Android image available so I was never able to have an unlocked boot-loader (meaning no alternatives like Lineage OS)\nSailfish Looks lovely but takes some getting used to\nHas an easy to use gesture based interface\nA nice RSS reader\nNo Android integration due to a lack of Alien Dalvik\nA lack of useful (to me) Apps and with some Portrait only\nMaps work but were awkward to get set up\nKali All of the Debian issues but with some cool tools\nNo monitor mode for this chip set so no fully functioning Wireshark\nPostmarketOS I compiled the image file but borked the flashing process, all my fault and I’ll return to this one at some point\nAll of the Gemini PDA code examples can also be found here .\n",
  "wordCount" : "670",
  "inLanguage": "en",
  "image":"https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/01_Upgrading_Debian_GeminiPDA.webp","datePublished": "2023-01-23T13:25:26Z",
  "dateModified": "2023-01-23T13:25:26Z",
  "author":{
    "@type": "Person",
    "name": "Boffin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://boffinsblog.github.io/posts/upgrading-debian-on-a-gemini-pda/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Boffins Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://boffinsblog.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://boffinsblog.github.io/" accesskey="h" title="Boffins Blog (Alt + H)">Boffins Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://boffinsblog.github.io/categories/featured/" title="Featured">
                    <span>Featured</span>
                </a>
            </li>
            <li>
                <a href="https://boffinsblog.github.io/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://boffinsblog.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://boffinsblog.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://boffinsblog.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Upgrading Debian on a Gemini PDA
    </h1>
    <div class="post-meta"><span title='2023-01-23 13:25:26 +0000 GMT'>January 23, 2023</span>&nbsp;·&nbsp;<span>4 min</span>&nbsp;·&nbsp;<span>Boffin</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#still-wondering-why-i-bought-this" aria-label="Still wondering why I bought this.">Still wondering why I bought this.</a></li>
                <li>
                    <a href="#current-debian-state-on-the-gemini-pda" aria-label="Current Debian state on the Gemini PDA">Current Debian state on the Gemini PDA</a></li>
                <li>
                    <a href="#alternatives-to-debian-when-upgrading-the-gemini-pda" aria-label="Alternatives to Debian when upgrading the Gemini PDA">Alternatives to Debian when upgrading the Gemini PDA</a></li>
                <li>
                    <a href="#other-oss-are-available" aria-label="Other OSs are available">Other OSs are available</a><ul>
                        
                <li>
                    <a href="#android" aria-label="Android">Android</a></li>
                <li>
                    <a href="#sailfish" aria-label="Sailfish">Sailfish</a></li>
                <li>
                    <a href="#kali" aria-label="Kali">Kali</a></li>
                <li>
                    <a href="#postmarketos" aria-label="PostmarketOS">PostmarketOS</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="still-wondering-why-i-bought-this">Still wondering why I bought this.<a hidden class="anchor" aria-hidden="true" href="#still-wondering-why-i-bought-this">#</a></h2>
<p>I’m always trying out different ways of upgrading Debian (or installing a different OS) on my Gemini PDA; anything more recent that the ancient shipped version would be nice.</p>
<p>I’ve had one of these devices from Planet Computers since their Indiegogo campaign, but upgrading any OS onto it is not straightforward at all.</p>
<p>I love the idea of it but for me, it’s a device looking for a purpose.</p>
<p>However every so often I forget about the hours I’ve sunk into finding a use for it, dig it out of the cupboard of forgotten tech and boot it up.</p>
<h2 id="current-debian-state-on-the-gemini-pda">Current Debian state on the Gemini PDA<a hidden class="anchor" aria-hidden="true" href="#current-debian-state-on-the-gemini-pda">#</a></h2>
<ul>
<li>
<p>Stuck on Debian 9 (stretch)</p>
</li>
<li>
<p>There is a path to upgrading to Debian 10 (buster) but a simple apt-get upgrade will fail</p>
</li>
<li>
<p>No further updates including security updates</p>
</li>
<li>
<p>Cannot set a <strong>static IP</strong> so no easy way to use SSH</p>
</li>
<li>
<p>Cannot set a <strong>wpa_supplicant</strong> so no WiFi auto-connect</p>
</li>
</ul>
<p>To cut down on <em>some</em> of the time I spend tinkering with this thing, I put together a couple of scripts that:</p>
<ul>
<li>
<p>Update the base system, install some tools and apps and create a new user</p>
</li>
<li>
<p>Add scripts, configure existing apps and add some new ones</p>
</li>
</ul>
<p>Run these using <strong>bash</strong> to get the nice colourful output in the Terminal:</p>
<ul>
<li>
<p>bash 01.Install.sh</p>
</li>
<li>
<p>bash 02.Configure.sh</p>
</li>
</ul>
<h3 id="01installsh">

<a href="https://github.com/BoffinsBlog/GeminiPDA/blob/main/install-configure/01.Install.sh" target="_blank" rel="nofollow noopener noreferrer">01.Install.sh</a>
</h3>
<p>This will:</p>
<ul>
<li>
<p>Disable ancient repos</p>
</li>
<li>
<p>Update APT repos and install apt-transport-https</p>
</li>
<li>
<p>Purge VLC before installing again later (causes upgrading error)</p>
</li>
<li>
<p>Upgrade the system, this one will fail because of the LibreOffice nonsense (causes upgrading error)</p>
</li>
<li>
<p>Repair LibreOffice</p>
</li>
<li>
<p>Update APT repos and install some tools</p>
</li>
<li>
<p>Update APT repos and install some apps</p>
</li>
<li>
<p>Upgrade the system – system wide upgrade</p>
</li>
<li>
<p>Set Timezone</p>
</li>
<li>
<p>Set Locale as en_GB.UTF-8</p>
</li>
<li>
<p>Create a new user</p>
</li>
<li>
<p>Change the hostname</p>
</li>
<li>
<p>Enable avahi</p>
</li>
<li>
<p>Configure wpa_supplicant for automatic login</p>
</li>
<li>
<p>Symlink the config into -wlan0.conf</p>
</li>
<li>
<p>Configure wlan0 interface</p>
</li>
<li>
<p>Finally, tidy everything up</p>
</li>
</ul>
<h3 id="02configuresh">

<a href="https://github.com/BoffinsBlog/GeminiPDA/blob/main/install-configure/02.Configure.sh" target="_blank" rel="nofollow noopener noreferrer">02.Configure.sh</a>
</h3>
<p>This will:</p>
<ul>
<li>
<p>Configure Wireshark</p>
</li>
<li>
<p>Make the Terminal colourful</p>
</li>
<li>
<p>Delete the gemini user</p>
</li>
<li>
<p>Remove some directories</p>
</li>
<li>
<p>Add some directories</p>
</li>
<li>
<p>Add and configure the .ssh directory</p>
</li>
<li>
<p>Populate the .ssh directory</p>
</li>
<li>
<p>Add some scripts</p>
</li>
<li>
<p>Install Arduino from backup and configure</p>
</li>
<li>
<p>Install VNC from backup</p>
</li>
<li>
<p>Configure Conky &amp; Compton</p>
</li>
<li>
<p>Auto-hide the bottom panel</p>
</li>
<li>
<p>Add the ‘mount’ scripts to the menu</p>
</li>
</ul>
<p>However, Debian is not the only choice.</p>
<p>The Gemini PDA has a variety of operating systems available to use.</p>
<p>(And I’ve been through most of them over the years.)</p>
<p>I’m not going to cover how to re-flash a device (there are numerous articles about that on the interwebs) nor am I going to bemoan why there is no active development on any of these.</p>
<h2 id="alternatives-to-debian-when-upgrading-the-gemini-pda">Alternatives to Debian when upgrading the Gemini PDA<a hidden class="anchor" aria-hidden="true" href="#alternatives-to-debian-when-upgrading-the-gemini-pda">#</a></h2>
<p>If you are upgrading Debian on a Gemini PDA this is an overview of the current OS situation.</p>
<h2 id="other-oss-are-available">Other OSs are available<a hidden class="anchor" aria-hidden="true" href="#other-oss-are-available">#</a></h2>
<p>I wish that these were all straightforward to install, but they are not.</p>
<p>Android is easily the easiest with a re-flash back to stock.</p>
<p>However, Sailfish comes in a close second with PostmarketOS being the most complex to get up and running.</p>
<p>All have their idiosyncrasies though.</p>
<h3 id="android">Android<a hidden class="anchor" aria-hidden="true" href="#android">#</a></h3>
<ul>
<li>
<p>Stuck on Android 8</p>
</li>
<li>
<p>No further updates including security updates</p>
</li>
<li>
<p>Some current Apps no longer function under an OS from 2017</p>
</li>
<li>
<p>There seems to be no rooted Android image available so I was never able to have an unlocked boot-loader (meaning no alternatives like Lineage OS)</p>
</li>
</ul>
<h3 id="sailfish">Sailfish<a hidden class="anchor" aria-hidden="true" href="#sailfish">#</a></h3>
<ul>
<li>
<p>Looks lovely but takes some getting used to</p>
</li>
<li>
<p>Has an easy to use gesture based interface</p>
</li>
<li>
<p>A nice RSS reader</p>
</li>
<li>
<p>No Android integration due to a lack of Alien Dalvik</p>
</li>
<li>
<p>A lack of useful (to me) Apps and with some Portrait only</p>
</li>
<li>
<p>Maps work but were awkward to get set up</p>
</li>
</ul>
<h3 id="kali">Kali<a hidden class="anchor" aria-hidden="true" href="#kali">#</a></h3>
<ul>
<li>
<p>All of the Debian issues but with some cool tools</p>
</li>
<li>
<p>No monitor mode for this chip set so no fully functioning Wireshark</p>
</li>
</ul>
<h3 id="postmarketos">PostmarketOS<a hidden class="anchor" aria-hidden="true" href="#postmarketos">#</a></h3>
<p>I compiled the image file but borked the flashing process, all my fault and I’ll return to this one at some point</p>
<p>All of the Gemini PDA code examples can also be found 

<a href="https://github.com/BoffinsBlog/GeminiPDA/" target="_blank" rel="nofollow noopener noreferrer">here</a>
.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://boffinsblog.github.io/tags/bash/">Bash</a></li>
      <li><a href="https://boffinsblog.github.io/tags/cupboard-of-forgotten-tech/">Cupboard of Forgotten Tech</a></li>
      <li><a href="https://boffinsblog.github.io/tags/debian/">Debian</a></li>
      <li><a href="https://boffinsblog.github.io/tags/gemini-pda/">Gemini PDA</a></li>
      <li><a href="https://boffinsblog.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://boffinsblog.github.io/tags/software/">Software</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://boffinsblog.github.io/posts/apache-traffic-analysis-using-goaccess/">
    <span class="title">« Prev</span>
    <br>
    <span>Apache Traffic Analysis Using GoAccess</span>
  </a>
  <a class="next" href="https://boffinsblog.github.io/posts/larson-scanner/">
    <span class="title">Next »</span>
    <br>
    <span>Larson Scanner</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://boffinsblog.github.io/">Boffins Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
        <br>
        <p><a href="https://www.creativecommons.org/licenses/by-nc/4.0/deed.en" rel="noopener noreferrer" target="_blank">This work is licensed under CC BY-NC-SA 4.0</a></p>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
