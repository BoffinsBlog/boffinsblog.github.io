<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Moving to Hugo from WordPress | Boffins Blog</title>
<meta name="keywords" content="Self Hosting, Software">
<meta name="description" content="Why I spent an inordinate amount of time moving to the Hugo &lsquo;Static Site Generator&rsquo;.">
<meta name="author" content="Boffin">
<link rel="canonical" href="https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e13be8719bbabf4005d0d2b0f19dba897f7d41b2e807b64c47ee1436d126ab01.css" integrity="sha256-4TvocZu6v0AF0NKw8Z26iX99QbLoB7ZMR&#43;4UNtEmqwE=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://boffinsblog.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://boffinsblog.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://boffinsblog.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://boffinsblog.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://boffinsblog.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:url" content="https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/">
  <meta property="og:site_name" content="Boffins Blog">
  <meta property="og:title" content="Moving to Hugo from WordPress">
  <meta property="og:description" content="Why I spent an inordinate amount of time moving to the Hugo ‘Static Site Generator’.">
  <meta property="og:locale" content="en-gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-21T10:06:59+01:00">
    <meta property="article:modified_time" content="2024-11-21T10:06:59+01:00">
    <meta property="article:tag" content="Self Hosting">
    <meta property="article:tag" content="Software">
    <meta property="og:image" content="https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/01_Hugo_Page_Speed.webp">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/01_Hugo_Page_Speed.webp">
<meta name="twitter:title" content="Moving to Hugo from WordPress">
<meta name="twitter:description" content="Why I spent an inordinate amount of time moving to the Hugo &lsquo;Static Site Generator&rsquo;.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://boffinsblog.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Moving to Hugo from WordPress",
      "item": "https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Moving to Hugo from WordPress",
  "name": "Moving to Hugo from WordPress",
  "description": "Why I spent an inordinate amount of time moving to the Hugo \u0026lsquo;Static Site Generator\u0026rsquo;.",
  "keywords": [
    "Self Hosting", "Software"
  ],
  "articleBody": "Or: ‘How I Learned to Stop Worrying and Love the Code’ There are whole buch of ‘How To’ blogs on the Interwebs about moving from WordPress to a Static Site Generator (SSG).\nThis is not another one of those, it’s more my Notes and Thoughts.\nFirst, Why NOT? I’m not really interested in the recent WordPress shenanigans.\nAs a self-hoster, one petty millionaire being cross at another millionaire doesn’t affect me in the slightest.\nThis is not the reason that I made the move.\nSo, Why? There are a number of reasons why.\nThis site only really existed as a vehicle for me the learn about WorldPress, and I feel as if I’ve come to the end of that journey.\nI’d also noticed something else, my writing had become SEO oriented; I was becoming transfixed on getting all the Yeost SEO green dots for each post.\nI was losing my writing style to please the Google Gods and I didn’t like that.\nI wanted to learn something new.\nI’m very much of the midset “everything is working now; time to change it”.\nThere is a longer term plan to offload my static sites onto my old SheevaPlug which currently resides in the ‘Cupboard of Forgotten Tech’ , so this is the first step on that journey.\nStatic sites are blazingly fast.\nExporting WordPress Content I tried both:\nhttps://github.com/SchumacherFM/wordpress-to-hugo-exporter https://github.com/benbalter/wordpress-to-jekyll-exporter The first requires downloading, unzipping and adding to the /wp-content/plugins/ folder.\nThe second can either be installed as a plugin; or downloaded, unzipped and placed in the /wp-content/plugins/ folder.\nMore tools can be found here .\nFor my usage the Jekyll exporter worked better.\nCreating Markdown Content By far the biggest time sink was cleaning up the export.\nYes, both of the above produced usable Markdown.\nYet:\nWordPress html artifacts remained\nImages were in a weird folder\nImages had lost their alt text\nGenerally it was all a bit of a mess\nAll of the above and a bunch of other things I can’t remember needed addressing before I was happy with the Markdown.\nIt was essentially a long find and replace few hours.\nThe process did however afforded me the opportunity to do a bit of light editing (read: get rid of some of the SEO chasing I’d done in the past).\nStuff I Don’t Like There is one thing that I don’t really like about static sites, and that’s where the content ends up in relation to the final URL.\nIn the development enviroment all of the content goes under /content/posts/.\nThis, I like; it’s tidy and uncluttered.\nHowever, when deploying to the web server this hierarchy is replicated, meaning that my content ends up in https://tld/posts/my-post.html.\nThis, I don’t like.\nI completely understand why this happens.\nI completely understand how having a database prevents this happening.\nI also understand that I can take out the /posts/ portion of the URL by editing the [permalinks] in the hugo.yaml config file.\nUnfortunately that leads to everything being in the server’s root folder; which is untidy and cluttered.\nI should probably look at creating an nginx rewrite rule or something.\nAn Inelegant nginx Rewrite Rule So, I cobbled together the below, while I look for a one line regex rewrite rule:\n# 0001 location /googleaiy-raspberrypi-scroll-phat/ { rewrite ^/googleaiy-raspberrypi-scroll-phat/ /posts/2018/04/googleaiy-raspberrypi-scroll-phat/ break; } # 0002 location /refurbishing-a-picade/ { rewrite ^/refurbishing-a-picade/ /posts/2018/10/refurbishing-a-picade/ break; } My Current Workflow The Internet told me that a good chunk of time would be sunk into developing the new way of working.\nYep, this turned out to be true.\nNot least of all:\nGetting content to the web server with the correct permissions\nBacking up the current content\nSo, naturally I wrote a bash script that does the following:\nStop the Hugo dev-server\nchown the remote web server directory (take ownership)\nRemove any existing content on the remote web server\nRemove any existing local Hugo ‘/public’ content\nBuild the new local Hugo website\nCopy the Hugo ‘/public’ content to the remote web server\nchown the remote web server directory (give ownership to www-data)\nBackup (rsync) the working directory\nClear out the Hugo generated ‘/public’ folder before syncing (no need to store this in Forgejo)\nPush ‘/path/to/git/hugo/’ to Forgejo\nStart the Hugo dev-server\nThe Deployment Script deploy.sh This is linked to an alias in my .bashrc file so that I can simply type ‘Deploy_Hugo’ in a Termininal, and it goes off and does its thing.\nIn a Terminal:\nnano .bashrc\nAdd:\n# Add deploy alias(s) for Hugo alias Deploy_Hugo=\"bash /path/to/script/deploy.sh\" Then reload .bashrc.\nsource ~/.bashrc\nFeel free to chop this up and season to taste:\n#!/bin/bash # Functions nuke_hugo () { clear; echo \"\"; # Nuke the existing Hugo installation echo -e \"\\e[1;36mNuke the existing Hugo installation...\\e[0m\"; # Sleep so the screen can be read before moving on sleep 2; # Stop the Hugo dev-server echo \"\"; echo -e \"\\e[1;33mStop the Hugo dev-server...\\e[0m\"; killall hugo; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # chown the remote web server directory (take ownership) echo -e \"\\e[1;33mchown the remote web server directory (take ownership)...\\e[0m\"; ssh -t foo@server 'sudo chown $USER:$USER -R /var/www/example.org'; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Remove any existing content on the remote web server echo -e \"\\e[1;33mRemove any existing content on the remote web server...\\e[0m\"; ssh -t foo@server 'rm -R /var/www/example.org/*'; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Remove any existing local Hugo '/public' content echo -e \"\\e[1;33mRemove any existing local Hugo '/public' content...\\e[0m\"; rm -R /path/to/local/hugo/public/*; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Build the new local Hugo website echo -e \"\\e[1;33mBuild the new local Hugo website...\\e[0m\"; (cd /path/to/local/hugo/ \u0026\u0026 hugo); echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Copy the Hugo '/public' content to the remote web server echo -e \"\\e[1;33mCopy the Hugo '/public' content to the remote web server...\\e[0m\"; scp -r /path/to/local/hugo/public/* foo@server:/var/www/example.org/; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # chown the remote web server directory (give ownership to www-data) echo -e \"\\e[1;33mchown the remote web server directory (give ownership to www-data)...\\e[0m\"; ssh -t foo@server 'sudo chown www-data:www-data -R /var/www/example.org'; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Backup (rsync) the working directory echo \"\"; echo -e \"\\e[1;33mBackup (rsync) the working directory...\\e[0m\"; rsync -a -P --delete -v --exclude '.git' /path/to/local/hugo /path/to/git/hugo; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Clear out the Hugo generated '/public' folder before syncing (no need to store this in Forgejo) echo -e \"\\e[1;33mClear out the Hugo generated '/public' folder before syncing (no need to store this in Forgejo)...\\e[0m\"; rm -R /path/to/git/hugo/public/*; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Push '/path/to/git/hugo/' to Forgejo echo -e \"\\e[1;33mPush '/path/to/git/hugo/' to Forgejo...\\e[0m\"; cd /path/to/git/hugo/; git add .; git commit -m 'Modified' .; git push -u origin main; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; # Start the Hugo dev-server echo -e \"\\e[1;33mStart the hugo dev-server...\\e[0m\"; hugo server -s /path/to/local/hugo; echo -e \"\\e[32mDone\\e[0m\"; echo \"\"; } # Start by clearing the Terminal window clear echo \"\"; echo -e \"\\e[1;34mUse \\e[1;36mCtrl-c\\e[1;34m to \\e[1;31mExit\\e[1;34m and close the window...\\e[0m\"; echo \"\"; echo -e \"\\e[1;31mNuke\\e[1;34m will:\"; echo -e \" Stop the Hugo dev-server\"; echo -e \" chown the remote web server directory (take ownership)\"; echo -e \" Remove any existing content on the remote web server\"; echo -e \" Remove any existing local Hugo '/public' content\"; echo -e \" Build the new local Hugo website\"; echo -e \" Copy the Hugo '/public' content to the remote web server\"; echo -e \" chown the remote web server directory (give ownership to www-data)\"; echo -e \" Backup (rsync) the working directory\"; echo -e \" Clear out the Hugo generated '/public' folder before syncing (no need to store this in Forgejo)\"; echo -e \" Push '/path/to/git/hugo/' to Forgejo\"; echo -e \" Start the Hugo dev-server\"; echo \"\"; # Loop while true; do options=(\"Nuke\") echo -e \"\\e[1;36mChoose an option:\\e[0m\" select opt in \"${options[@]}\"; do case $REPLY in 1) nuke_hugo; break ;; *) echo \"Whoops, choose again, option '$REPLY' is invalid...\" \u003e\u00262 esac done done Hope that helps someone.\n",
  "wordCount" : "1309",
  "inLanguage": "en",
  "image":"https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/01_Hugo_Page_Speed.webp","datePublished": "2024-11-21T10:06:59+01:00",
  "dateModified": "2024-11-21T10:06:59+01:00",
  "author":{
    "@type": "Person",
    "name": "Boffin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://boffinsblog.github.io/posts/moving-to-hugo-from-wordpress/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Boffins Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://boffinsblog.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://boffinsblog.github.io/" accesskey="h" title="Boffins Blog (Alt + H)">Boffins Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://boffinsblog.github.io/categories/featured/" title="Featured">
                    <span>Featured</span>
                </a>
            </li>
            <li>
                <a href="https://boffinsblog.github.io/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://boffinsblog.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://boffinsblog.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://boffinsblog.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Moving to Hugo from WordPress
    </h1>
    <div class="post-meta"><span title='2024-11-21 10:06:59 +0100 +0100'>November 21, 2024</span>&nbsp;·&nbsp;<span>7 min</span>&nbsp;·&nbsp;<span>Boffin</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#or-how-i-learned-to-stop-worrying-and-love-the-code" aria-label="Or: &lsquo;How I Learned to Stop Worrying and Love the Code&rsquo;">Or: &lsquo;How I Learned to Stop Worrying and Love the Code&rsquo;</a></li>
                <li>
                    <a href="#first-why-not" aria-label="First, Why NOT?">First, Why NOT?</a></li>
                <li>
                    <a href="#so-why" aria-label="So, Why?">So, Why?</a></li>
                <li>
                    <a href="#exporting-wordpress-content" aria-label="Exporting WordPress Content">Exporting WordPress Content</a></li>
                <li>
                    <a href="#creating-markdown-content" aria-label="Creating Markdown Content">Creating Markdown Content</a></li>
                <li>
                    <a href="#stuff-i-dont-like" aria-label="Stuff I Don&rsquo;t Like">Stuff I Don&rsquo;t Like</a><ul>
                        
                <li>
                    <a href="#an-inelegant-nginx-rewrite-rule" aria-label="An Inelegant nginx Rewrite Rule">An Inelegant nginx Rewrite Rule</a></li></ul>
                </li>
                <li>
                    <a href="#my-current-workflow" aria-label="My Current Workflow">My Current Workflow</a></li>
                <li>
                    <a href="#the-deployment-script" aria-label="The Deployment Script">The Deployment Script</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="or-how-i-learned-to-stop-worrying-and-love-the-code">Or: &lsquo;How I Learned to Stop Worrying and Love the Code&rsquo;<a hidden class="anchor" aria-hidden="true" href="#or-how-i-learned-to-stop-worrying-and-love-the-code">#</a></h2>
<p>There are whole buch of &lsquo;How To&rsquo; blogs on the Interwebs about moving from WordPress to a Static Site Generator (SSG).</p>
<p>This is <strong>not</strong> another one of those, it&rsquo;s more my Notes and Thoughts.</p>
<h2 id="first-why-not">First, Why NOT?<a hidden class="anchor" aria-hidden="true" href="#first-why-not">#</a></h2>
<p>I&rsquo;m not really interested in the recent WordPress shenanigans.</p>
<p>As a self-hoster, one petty millionaire being cross at another millionaire doesn&rsquo;t affect me in the slightest.</p>
<p>This is <strong>not</strong> the reason that I made the move.</p>
<h2 id="so-why">So, Why?<a hidden class="anchor" aria-hidden="true" href="#so-why">#</a></h2>
<p>There <strong>are</strong> a number of reasons <em>why</em>.</p>
<p>This site only really existed as a vehicle for me the learn about WorldPress, and I feel as if I&rsquo;ve come to the end of that journey.</p>
<p>I&rsquo;d also noticed something else, my writing had become SEO oriented; I was becoming transfixed on getting all the Yeost SEO green dots for each post.</p>
<p>I was losing my writing style to please the Google Gods and I didn&rsquo;t like that.</p>
<p>I wanted to learn something new.</p>
<p>I&rsquo;m very much of the midset &ldquo;everything is working now; time to change it&rdquo;.</p>
<p>There is a longer term plan to offload my static sites onto my old SheevaPlug which currently resides in the 


      
    
  <a href="/categories/cupboard-of-forgotten-tech/">&lsquo;Cupboard of Forgotten Tech&rsquo;</a>
, so this is the first step on that journey.</p>
<p>Static sites are blazingly fast.</p>
<h2 id="exporting-wordpress-content">Exporting WordPress Content<a hidden class="anchor" aria-hidden="true" href="#exporting-wordpress-content">#</a></h2>
<p>I tried both:</p>
<ul>
<li>
<p>

<a href="https://github.com/SchumacherFM/wordpress-to-hugo-exporter" target="_blank" rel="nofollow noopener noreferrer">https://github.com/SchumacherFM/wordpress-to-hugo-exporter</a>
</p>
</li>
<li>
<p>

<a href="https://github.com/benbalter/wordpress-to-jekyll-exporter" target="_blank" rel="nofollow noopener noreferrer">https://github.com/benbalter/wordpress-to-jekyll-exporter</a>
</p>
</li>
</ul>
<p>The first requires downloading, unzipping and adding to the <code>/wp-content/plugins/</code> folder.</p>
<p>The second can either be installed as a plugin; or downloaded, unzipped and placed in the <code>/wp-content/plugins/</code> folder.</p>
<p>More tools can be found 

<a href="https://gohugo.io/tools/migrations/" target="_blank" rel="nofollow noopener noreferrer">here</a>
.</p>
<p>For my usage the Jekyll exporter worked better.</p>
<h2 id="creating-markdown-content">Creating Markdown Content<a hidden class="anchor" aria-hidden="true" href="#creating-markdown-content">#</a></h2>
<p>By far the biggest time sink was cleaning up the export.</p>
<p>Yes, both of the above produced usable Markdown.</p>
<p>Yet:</p>
<ul>
<li>
<p>WordPress html artifacts remained</p>
</li>
<li>
<p>Images were in a weird folder</p>
</li>
<li>
<p>Images had lost their alt text</p>
</li>
<li>
<p>Generally it was all a bit of a mess</p>
</li>
</ul>
<p>All of the above and a bunch of other things I can&rsquo;t remember needed addressing before I was happy with the Markdown.</p>
<p>It was essentially a long find and replace few hours.</p>
<p>The process did however afforded me the opportunity to do a bit of light editing (read: get rid of some of the SEO chasing I&rsquo;d done in the past).</p>
<h2 id="stuff-i-dont-like">Stuff I Don&rsquo;t Like<a hidden class="anchor" aria-hidden="true" href="#stuff-i-dont-like">#</a></h2>
<p>There is <strong>one</strong> thing that I don&rsquo;t really like about static sites, and that&rsquo;s where the content ends up in relation to the final URL.</p>
<p>In the development enviroment all of the content goes under <code>/content/posts/</code>.</p>
<p>This, I like; it&rsquo;s tidy and uncluttered.</p>
<p>However, when deploying to the web server this hierarchy is replicated, meaning that my content ends up in <code>https://tld/posts/my-post.html</code>.</p>
<p>This, I don&rsquo;t like.</p>
<p>I completely understand <em>why</em> this happens.</p>
<p>I completely understand <em>how</em> having a database prevents this happening.</p>
<p>I also understand that I can take out the <code>/posts/</code> portion of the URL by editing the <code>[permalinks]</code> in the <code>hugo.yaml</code> config file.</p>
<p>Unfortunately that leads to everything being in the server&rsquo;s root folder; which is untidy and cluttered.</p>
<p>I should probably look at creating an nginx <code>rewrite</code> rule or something.</p>
<h3 id="an-inelegant-nginx-rewrite-rule">An Inelegant nginx Rewrite Rule<a hidden class="anchor" aria-hidden="true" href="#an-inelegant-nginx-rewrite-rule">#</a></h3>
<p>So, I cobbled together the below, while I look for a one line regex <code>rewrite</code> rule:</p>
<pre tabindex="0"><code># 0001
location /googleaiy-raspberrypi-scroll-phat/ {
    rewrite ^/googleaiy-raspberrypi-scroll-phat/ /posts/2018/04/googleaiy-raspberrypi-scroll-phat/ break;
}

# 0002
location /refurbishing-a-picade/ {
    rewrite ^/refurbishing-a-picade/ /posts/2018/10/refurbishing-a-picade/ break;
}
</code></pre><h2 id="my-current-workflow">My Current Workflow<a hidden class="anchor" aria-hidden="true" href="#my-current-workflow">#</a></h2>
<p>The Internet told me that a good chunk of time would be sunk into developing the new way of working.</p>
<p>Yep, this turned out to be true.</p>
<p>Not least of all:</p>
<ul>
<li>
<p>Getting content to the web server with the correct permissions</p>
</li>
<li>
<p>Backing up the current content</p>
</li>
</ul>
<p>So, naturally I wrote a bash script that does the following:</p>
<ul>
<li>
<p>Stop the Hugo dev-server</p>
</li>
<li>
<p>chown the remote web server directory (take ownership)</p>
</li>
<li>
<p>Remove any existing content on the remote web server</p>
</li>
<li>
<p>Remove any existing local Hugo &lsquo;/public&rsquo; content</p>
</li>
<li>
<p>Build the new local Hugo website</p>
</li>
<li>
<p>Copy the Hugo &lsquo;/public&rsquo; content to the remote web server</p>
</li>
<li>
<p>chown the remote web server directory (give ownership to www-data)</p>
</li>
<li>
<p>Backup (rsync) the working directory</p>
</li>
<li>
<p>Clear out the Hugo generated &lsquo;/public&rsquo; folder before syncing (no need to store this in Forgejo)</p>
</li>
<li>
<p>Push &lsquo;/path/to/git/hugo/&rsquo; to Forgejo</p>
</li>
<li>
<p>Start the Hugo dev-server</p>
</li>
</ul>
<h2 id="the-deployment-script">The Deployment Script<a hidden class="anchor" aria-hidden="true" href="#the-deployment-script">#</a></h2>
<h3 id="deploysh">

<a href="https://github.com/BoffinsBlog/Hugo/blob/main/deploy_scripts/deploy.sh" target="_blank" rel="nofollow noopener noreferrer">deploy.sh</a>
</h3>
<p>This is linked to an alias in my .bashrc file so that I can simply type &lsquo;Deploy_Hugo&rsquo; in a Termininal, and it goes off and does its thing.</p>
<p>In a Terminal:</p>
<p><code>nano .bashrc</code></p>
<p>Add:</p>
<pre tabindex="0"><code># Add deploy alias(s) for Hugo
alias Deploy_Hugo=&#34;bash /path/to/script/deploy.sh&#34;
</code></pre><p>Then reload .bashrc.</p>
<p><code>source ~/.bashrc</code></p>
<p>Feel free to chop this up and season to taste:</p>
<pre tabindex="0"><code>#!/bin/bash

# Functions
nuke_hugo () {
    clear;
    echo &#34;&#34;;
    # Nuke the existing Hugo installation
    echo -e &#34;\e[1;36mNuke the existing Hugo installation...\e[0m&#34;;
    # Sleep so the screen can be read before moving on
    sleep 2;

    # Stop the Hugo dev-server
    echo &#34;&#34;;
    echo -e &#34;\e[1;33mStop the Hugo dev-server...\e[0m&#34;;
    killall hugo;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # chown the remote web server directory (take ownership)
    echo -e &#34;\e[1;33mchown the remote web server directory (take ownership)...\e[0m&#34;;
    ssh -t foo@server &#39;sudo chown $USER:$USER -R /var/www/example.org&#39;;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Remove any existing content on the remote web server
    echo -e &#34;\e[1;33mRemove any existing content on the remote web server...\e[0m&#34;;
    ssh -t foo@server &#39;rm -R /var/www/example.org/*&#39;;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Remove any existing local Hugo &#39;/public&#39; content
    echo -e &#34;\e[1;33mRemove any existing local Hugo &#39;/public&#39; content...\e[0m&#34;;
    rm -R /path/to/local/hugo/public/*;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Build the new local Hugo website
    echo -e &#34;\e[1;33mBuild the new local Hugo website...\e[0m&#34;;
    (cd /path/to/local/hugo/ &amp;&amp; hugo);
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Copy the Hugo &#39;/public&#39; content to the remote web server
    echo -e &#34;\e[1;33mCopy the Hugo &#39;/public&#39; content to the remote web server...\e[0m&#34;;
    scp -r /path/to/local/hugo/public/* foo@server:/var/www/example.org/;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # chown the remote web server directory (give ownership to www-data)
    echo -e &#34;\e[1;33mchown the remote web server directory (give ownership to www-data)...\e[0m&#34;;
    ssh -t foo@server &#39;sudo chown www-data:www-data -R /var/www/example.org&#39;;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Backup (rsync) the working directory
    echo &#34;&#34;;
    echo -e &#34;\e[1;33mBackup (rsync) the working directory...\e[0m&#34;;
    rsync -a -P --delete -v --exclude &#39;.git&#39; /path/to/local/hugo /path/to/git/hugo;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Clear out the Hugo generated &#39;/public&#39; folder before syncing (no need to store this in Forgejo)
    echo -e &#34;\e[1;33mClear out the Hugo generated &#39;/public&#39; folder before syncing (no need to store this in Forgejo)...\e[0m&#34;;
    rm -R /path/to/git/hugo/public/*;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Push &#39;/path/to/git/hugo/&#39; to Forgejo
    echo -e &#34;\e[1;33mPush &#39;/path/to/git/hugo/&#39; to Forgejo...\e[0m&#34;;
    cd /path/to/git/hugo/;
    git add .;
    git commit -m &#39;Modified&#39; .;
    git push -u origin main;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;

    # Start the Hugo dev-server
    echo -e &#34;\e[1;33mStart the hugo dev-server...\e[0m&#34;;
    hugo server -s /path/to/local/hugo;
    echo -e &#34;\e[32mDone\e[0m&#34;;
    echo &#34;&#34;;
}

# Start by clearing the Terminal window
clear

echo &#34;&#34;;
echo -e &#34;\e[1;34mUse \e[1;36mCtrl-c\e[1;34m to \e[1;31mExit\e[1;34m and close the window...\e[0m&#34;;
echo &#34;&#34;;
echo -e &#34;\e[1;31mNuke\e[1;34m will:&#34;;
echo -e &#34;     Stop the Hugo dev-server&#34;;
echo -e &#34;     chown the remote web server directory (take ownership)&#34;;
echo -e &#34;     Remove any existing content on the remote web server&#34;;
echo -e &#34;     Remove any existing local Hugo &#39;/public&#39; content&#34;;
echo -e &#34;     Build the new local Hugo website&#34;;
echo -e &#34;     Copy the Hugo &#39;/public&#39; content to the remote web server&#34;;
echo -e &#34;     chown the remote web server directory (give ownership to www-data)&#34;;
echo -e &#34;     Backup (rsync) the working directory&#34;;
echo -e &#34;     Clear out the Hugo generated &#39;/public&#39; folder before syncing (no need to store this in Forgejo)&#34;;
echo -e &#34;     Push &#39;/path/to/git/hugo/&#39; to Forgejo&#34;;
echo -e &#34;     Start the Hugo dev-server&#34;;
echo &#34;&#34;;

# Loop
while true; do
    options=(&#34;Nuke&#34;)

    echo -e &#34;\e[1;36mChoose an option:\e[0m&#34;
    select opt in &#34;${options[@]}&#34;; do
        case $REPLY in
            1) nuke_hugo; break ;;
            *) echo &#34;Whoops, choose again, option &#39;$REPLY&#39; is invalid...&#34; &gt;&amp;2
        esac
    done

done
</code></pre><p>Hope that helps someone.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://boffinsblog.github.io/tags/self-hosting/">Self Hosting</a></li>
      <li><a href="https://boffinsblog.github.io/tags/software/">Software</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://boffinsblog.github.io/posts/the-travelling-packet/">
    <span class="title">« Prev</span>
    <br>
    <span>The Travelling Packet</span>
  </a>
  <a class="next" href="https://boffinsblog.github.io/posts/self-hosting-freshrss/">
    <span class="title">Next »</span>
    <br>
    <span>Self-Hosting FreshRSS</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://boffinsblog.github.io/">Boffins Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
        <br>
        <p><a href="https://www.creativecommons.org/licenses/by-nc/4.0/deed.en" rel="noopener noreferrer" target="_blank">This work is licensed under CC BY-NC-SA 4.0</a></p>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
