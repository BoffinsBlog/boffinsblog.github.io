<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Installing Debian Bookworm on a SheevaPlug MMC | Boffins Blog</title>
<meta name="keywords" content="Debian, Hardware, Linux, Self Hosting, SheevaPlug, Software">
<meta name="description" content="Installing Debian Bookworm on a SheevaPlug MMC.">
<meta name="author" content="Boffin">
<link rel="canonical" href="https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e13be8719bbabf4005d0d2b0f19dba897f7d41b2e807b64c47ee1436d126ab01.css" integrity="sha256-4TvocZu6v0AF0NKw8Z26iX99QbLoB7ZMR&#43;4UNtEmqwE=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://boffinsblog.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://boffinsblog.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://boffinsblog.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://boffinsblog.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://boffinsblog.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:url" content="https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/">
  <meta property="og:site_name" content="Boffins Blog">
  <meta property="og:title" content="Installing Debian Bookworm on a SheevaPlug MMC">
  <meta property="og:description" content="Installing Debian Bookworm on a SheevaPlug MMC.">
  <meta property="og:locale" content="en-gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-09-18T09:50:42+01:00">
    <meta property="article:modified_time" content="2025-09-18T09:50:42+01:00">
    <meta property="article:tag" content="Debian">
    <meta property="article:tag" content="Hardware">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Self Hosting">
    <meta property="article:tag" content="SheevaPlug">
    <meta property="article:tag" content="Software">
    <meta property="og:image" content="https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/01_Debian_Bookworm_Neofetch.webp">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/01_Debian_Bookworm_Neofetch.webp">
<meta name="twitter:title" content="Installing Debian Bookworm on a SheevaPlug MMC">
<meta name="twitter:description" content="Installing Debian Bookworm on a SheevaPlug MMC.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://boffinsblog.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Installing Debian Bookworm on a SheevaPlug MMC",
      "item": "https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Installing Debian Bookworm on a SheevaPlug MMC",
  "name": "Installing Debian Bookworm on a SheevaPlug MMC",
  "description": "Installing Debian Bookworm on a SheevaPlug MMC.",
  "keywords": [
    "Debian", "Hardware", "Linux", "Self Hosting", "SheevaPlug", "Software"
  ],
  "articleBody": "Introduction A short series of SheevaPlug posts around the installation and configuration of different Operating Systems and additional software.\nUnbricking and booting\nUnbricking Installing Das U-Boot Using OpenWrt\nInstalling OpenWrt on the NAND Configuring OpenWrt Using Debian\nInstalling Debian Bookworm on an MMC Upgrading Debian Bookworm to Trixie Additional OpenWrt software\nInstalling a lighttpd web server Configuring lighttpd TLS and ACME Files and Tools Needed To install Debian Bookworm (which has Long Term Support (LTS), until June 30th, 2028) to the SheevaPlug MMC and boot.\nTFTP server A TFTP server is a lot easier that messing about with files on a USB.\nTo install a TFTP server run the following in a Terminal:\nsudo apt install tftpd-hpa\nThen, check that it is running:\nsudo systemctl status tftpd-hpa\nThen, take ownership of the TFTP server directory:\nsudo chown -R $USER /srv/tftp\nAny files now placed in this directory will be available to pull onto the ‘Plug.\nA working u-boot The following process assumes that there is a working u-boot in place, and that the SheevaPlug can actually boot.\nThere is a post about unbricking a SheevaPlug if that needs to be done prior to following these steps.\nThere is also a post about installing u-boot if the u-boot needs updating.\nResources https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/ The following two (2) files need to be downloaded and placed in the TFTP server directory:\nhttps://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/uImage https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/uInitrd Steps Boot the ‘Plug Power on the ‘Plug.\nIn a Terminal run the following:\nscreen /dev/ttyUSB0 115200\nInterrupt the boot process to get to the ‘Plug command prompt.\nprintenv\nIf needed set:\nsetenv serverip setenv ipaddr setenv ethaddr setenv macaddr Install Tell the ‘Plug to use the files on the TFTP server:\ntftpboot 0x00800000 uImage tftpboot 0x01100000 uInitrd Set the environment variables and start the installer:\nsetenv bootargs console=ttyS0,115200n8 base-installer/initramfs-tools/driver-policy=most bootm 0x00800000 0x01100000 The installation itself is fairly straightforward and anyone who has used a text based Debian installer will feel at home going through the steps.\nAt the end of the installation process the ‘Plug will need rebooting.\nConfigure u-boot - Part I - boot from MMC Power on the ‘Plug.\nIn a Terminal run the following:\nscreen /dev/ttyUSB0 115200\nInterrupt the boot process to get to the ‘Plug command prompt.\nThen set the environment variables:\nsetenv bootargs_console console=ttyS0,115200 setenv bootcmd_mmc 'mmc init; ext2load mmc 0:1 0x00800000 /uImage; ext2load mmc 0:1 0x01100000 /uInitrd' setenv bootcmd 'setenv bootargs $(bootargs_console); run bootcmd_mmc; bootm 0x00800000 0x01100000' saveenv Reboot:\nrun bootcmd\nConfigure u-boot - Part II - boot from NAND. Power on the ‘Plug.\nIn a Terminal run the following:\nscreen /dev/ttyUSB0 115200\nInterrupt the boot process to get to the ‘Plug command prompt.\nThe easiest way I found revert to booting from NAND was to reset all the environment variables:\nenv default -a\nThen set the environment variables:\nsetenv serverip setenv ipaddr setenv ethaddr setenv macaddr saveenv Reboot:\nrun bootcmd\nConclusion Being able to boot from an SD card has its advantages (usable space not being the least of them).\nThe Debian installation can also be updated to the latest release, Trixie .\nHowever OpenWrt is significantly faster than Debian.\nSo even though Debian has a greater breadth of repositories and software, OpenWrt is a clear winner when looking for an OS to perform simple tasks 24/7 (like a web server ).\n",
  "wordCount" : "557",
  "inLanguage": "en",
  "image":"https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/01_Debian_Bookworm_Neofetch.webp","datePublished": "2025-09-18T09:50:42+01:00",
  "dateModified": "2025-09-18T09:50:42+01:00",
  "author":{
    "@type": "Person",
    "name": "Boffin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://boffinsblog.github.io/posts/installing-debian-bookworm-on-a-sheevaplug-mmc/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Boffins Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://boffinsblog.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://boffinsblog.github.io/" accesskey="h" title="Boffins Blog (Alt + H)">Boffins Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://boffinsblog.github.io/categories/featured/" title="Featured">
                    <span>Featured</span>
                </a>
            </li>
            <li>
                <a href="https://boffinsblog.github.io/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://boffinsblog.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://boffinsblog.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://boffinsblog.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Installing Debian Bookworm on a SheevaPlug MMC
    </h1>
    <div class="post-meta"><span title='2025-09-18 09:50:42 +0100 BST'>September 18, 2025</span>&nbsp;·&nbsp;<span>3 min</span>&nbsp;·&nbsp;<span>Boffin</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#files-and-tools-needed" aria-label="Files and Tools Needed">Files and Tools Needed</a><ul>
                        
                <li>
                    <a href="#tftp-server" aria-label="TFTP server">TFTP server</a></li>
                <li>
                    <a href="#a-working-u-boot" aria-label="A working u-boot">A working u-boot</a></li>
                <li>
                    <a href="#resources" aria-label="Resources">Resources</a></li></ul>
                </li>
                <li>
                    <a href="#steps" aria-label="Steps">Steps</a><ul>
                        
                <li>
                    <a href="#boot-the-plug" aria-label="Boot the ‘Plug">Boot the ‘Plug</a></li>
                <li>
                    <a href="#install" aria-label="Install">Install</a></li>
                <li>
                    <a href="#configure-u-boot---part-i---boot-from-mmc" aria-label="Configure u-boot - Part I - boot from MMC">Configure u-boot - Part I - boot from MMC</a></li>
                <li>
                    <a href="#configure-u-boot---part-ii---boot-from-nand" aria-label="Configure u-boot - Part II - boot from NAND.">Configure u-boot - Part II - boot from NAND.</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>A short series of SheevaPlug posts around the installation and configuration of different Operating Systems and additional software.</p>
<p><strong>Unbricking and booting</strong></p>
<ul>
<li>
<p>


  <a href="/posts/unbricking-a-sheevaplug">Unbricking</a>
</p>
</li>
<li>
<p>


  <a href="/posts/installing-das-u-boot-on-a-sheevaplug-nand">Installing Das U-Boot</a>
</p>
</li>
</ul>
<p><strong>Using OpenWrt</strong></p>
<ul>
<li>
<p>


  <a href="/posts/installing-openwrt-on-a-sheevaplug-nand">Installing OpenWrt on the NAND</a>
</p>
</li>
<li>
<p>


  <a href="/posts/configuring-openwrt-on-a-sheevaplug">Configuring OpenWrt</a>
</p>
</li>
</ul>
<p><strong>Using Debian</strong></p>
<ul>
<li>
<p>


  <a href="/posts/installing-debian-bookworm-on-a-sheevaplug-mmc">Installing Debian Bookworm on an MMC</a>
</p>
</li>
<li>
<p>


  <a href="/posts/upgrading-debian-bookworm-to-trixie-on-a-sheevaplug-mmc">Upgrading Debian Bookworm to Trixie</a>
</p>
</li>
</ul>
<p><strong>Additional OpenWrt software</strong></p>
<ul>
<li>
<p>


  <a href="/posts/installing-lighttpd-on-a-sheevaplug-running-openwrt">Installing a lighttpd web server</a>
</p>
</li>
<li>
<p>


  <a href="/posts/configuring-lighttpd-tls-and-acme-on-a-sheevaplug">Configuring lighttpd TLS and ACME</a>
</p>
</li>
</ul>
<h2 id="files-and-tools-needed">Files and Tools Needed<a hidden class="anchor" aria-hidden="true" href="#files-and-tools-needed">#</a></h2>
<p>To install Debian Bookworm (which has Long Term Support (LTS), until June 30th, 2028) to the SheevaPlug MMC and boot.</p>
<h3 id="tftp-server">TFTP server<a hidden class="anchor" aria-hidden="true" href="#tftp-server">#</a></h3>
<p>A TFTP server is a <em>lot</em> easier that messing about with files on a USB.</p>
<p>To install a 

<a href="https://help.ubuntu.com/community/TFTP" target="_blank" rel="nofollow noopener noreferrer">TFTP server</a>
 run the following in a Terminal:</p>
<p><code>sudo apt install tftpd-hpa</code></p>
<p>Then, check that it is running:</p>
<p><code>sudo systemctl status tftpd-hpa</code></p>
<p>Then, take ownership of the TFTP server directory:</p>
<p><code>sudo chown -R $USER /srv/tftp</code></p>
<p>Any files now placed in this directory will be available to pull onto the ‘Plug.</p>
<h3 id="a-working-u-boot">A working u-boot<a hidden class="anchor" aria-hidden="true" href="#a-working-u-boot">#</a></h3>
<p>The following process assumes that there is a working u-boot in place, and that the SheevaPlug can actually boot.</p>
<p>There is a post about 


  <a href="/posts/unbricking-a-sheevaplug">unbricking a SheevaPlug</a>
 if that needs to be done prior to following these steps.</p>
<p>There is also a post about 


  <a href="/posts/installing-das-u-boot-on-a-sheevaplug-nand">installing u-boot</a>
 if the <code>u-boot</code> needs updating.</p>
<h3 id="resources">Resources<a hidden class="anchor" aria-hidden="true" href="#resources">#</a></h3>
<p>

<a href="https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/" target="_blank" rel="nofollow noopener noreferrer">https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/</a>
</p>
<p>The following two (2) files need to be downloaded and placed in the TFTP server directory:</p>
<p>

<a href="https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/uImage" target="_blank" rel="nofollow noopener noreferrer">https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/uImage</a>
</p>
<p>

<a href="https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/uInitrd" target="_blank" rel="nofollow noopener noreferrer">https://ftp.debian.org/debian/dists/bookworm/main/installer-armel/current/images/kirkwood/netboot/marvell/sheevaplug/uInitrd</a>
</p>
<h2 id="steps">Steps<a hidden class="anchor" aria-hidden="true" href="#steps">#</a></h2>
<h3 id="boot-the-plug">Boot the ‘Plug<a hidden class="anchor" aria-hidden="true" href="#boot-the-plug">#</a></h3>
<p>Power on the ‘Plug.</p>
<p>In a Terminal run the following:</p>
<p><code>screen /dev/ttyUSB0 115200</code></p>
<p>Interrupt the boot process to get to the ‘Plug command prompt.</p>
<p><code>printenv</code></p>
<p>If needed set:</p>
<pre tabindex="0"><code>setenv serverip &lt;Host_IP&gt;
setenv ipaddr &lt;SheevaPlug_IP&gt;
setenv ethaddr &lt;SheevaPlug_MAC&gt;
setenv macaddr &lt;SheevaPlug_MAC&gt;
</code></pre><h3 id="install">Install<a hidden class="anchor" aria-hidden="true" href="#install">#</a></h3>
<p>Tell the ‘Plug to use the files on the TFTP server:</p>
<pre tabindex="0"><code>tftpboot 0x00800000 uImage
tftpboot 0x01100000 uInitrd
</code></pre><p>Set the environment variables and start the installer:</p>
<pre tabindex="0"><code>setenv bootargs console=ttyS0,115200n8 base-installer/initramfs-tools/driver-policy=most
bootm 0x00800000 0x01100000
</code></pre><p>The installation itself is fairly straightforward and anyone who has used a text based Debian installer will feel at home going through the steps.</p>
<p>At the end of the installation process the &lsquo;Plug will need rebooting.</p>
<h3 id="configure-u-boot---part-i---boot-from-mmc">Configure u-boot - Part I - boot from MMC<a hidden class="anchor" aria-hidden="true" href="#configure-u-boot---part-i---boot-from-mmc">#</a></h3>
<p>Power on the ‘Plug.</p>
<p>In a Terminal run the following:</p>
<p><code>screen /dev/ttyUSB0 115200</code></p>
<p>Interrupt the boot process to get to the ‘Plug command prompt.</p>
<p>Then set the environment variables:</p>
<pre tabindex="0"><code>setenv bootargs_console console=ttyS0,115200
setenv bootcmd_mmc &#39;mmc init; ext2load mmc 0:1 0x00800000 /uImage; ext2load mmc 0:1 0x01100000 /uInitrd&#39;
setenv bootcmd &#39;setenv bootargs $(bootargs_console); run bootcmd_mmc; bootm 0x00800000 0x01100000&#39;
saveenv
</code></pre><p>Reboot:</p>
<p><code>run bootcmd</code></p>
<h3 id="configure-u-boot---part-ii---boot-from-nand">Configure u-boot - Part II - boot from NAND.<a hidden class="anchor" aria-hidden="true" href="#configure-u-boot---part-ii---boot-from-nand">#</a></h3>
<p>Power on the ‘Plug.</p>
<p>In a Terminal run the following:</p>
<p><code>screen /dev/ttyUSB0 115200</code></p>
<p>Interrupt the boot process to get to the ‘Plug command prompt.</p>
<p>The easiest way I found revert to booting from NAND was to reset all the environment variables:</p>
<p><code>env default -a</code></p>
<p>Then set the environment variables:</p>
<pre tabindex="0"><code>setenv serverip &lt;Host_IP&gt;
setenv ipaddr &lt;SheevaPlug_IP&gt;
setenv ethaddr &lt;SheevaPlug_MAC&gt;
setenv macaddr &lt;SheevaPlug_MAC&gt;
saveenv
</code></pre><p>Reboot:</p>
<p><code>run bootcmd</code></p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Being able to boot from an SD card has its advantages (usable space not being the least of them).</p>
<p>The Debian installation can also be 


  <a href="/posts/upgrading-debian-bookworm-to-trixie-on-a-sheevaplug-mmc">updated to the latest release, Trixie</a>
.</p>
<p>However OpenWrt is significantly faster than Debian.</p>
<p>So even though Debian has a greater breadth of repositories and software, OpenWrt is a clear winner when looking for an OS to perform simple tasks 24/7 (like a 


  <a href="/posts/installing-lighttpd-on-a-sheevaplug-running-openwrt">web server</a>
).</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://boffinsblog.github.io/tags/debian/">Debian</a></li>
      <li><a href="https://boffinsblog.github.io/tags/hardware/">Hardware</a></li>
      <li><a href="https://boffinsblog.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://boffinsblog.github.io/tags/self-hosting/">Self Hosting</a></li>
      <li><a href="https://boffinsblog.github.io/tags/sheevaplug/">SheevaPlug</a></li>
      <li><a href="https://boffinsblog.github.io/tags/software/">Software</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://boffinsblog.github.io/posts/upgrading-debian-bookworm-to-trixie-on-a-sheevaplug-mmc/">
    <span class="title">« Prev</span>
    <br>
    <span>Upgrading Debian Bookworm to Trixie on a SheevaPlug MMC</span>
  </a>
  <a class="next" href="https://boffinsblog.github.io/posts/configuring-openwrt-on-a-sheevaplug/">
    <span class="title">Next »</span>
    <br>
    <span>Configuring OpenWrt on a SheevaPlug</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://boffinsblog.github.io/">Boffins Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
        <br>
        <p><a href="https://www.creativecommons.org/licenses/by-nc/4.0/deed.en" rel="noopener noreferrer" target="_blank">This work is licensed under CC BY-NC-SA 4.0</a></p>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
